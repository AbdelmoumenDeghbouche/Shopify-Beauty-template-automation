{%- if block.settings.menu != blank -%}
    <div class="mega-menu-wrapper" {{ block.shopify_attributes }}>
      <details class="mega-menu">
        <summary class="header__menu-item list-menu__item link focus-inset">
          <span>{{ block.settings.menu.title }}</span>
       
            {{- 'icon-caret.svg' | inline_asset_content -}}
      
        </summary>
        <div class="mega-menu__content motion-reduce">
          <div class="mega-menu__grid page-width">
            {%- for link in block.settings.menu.links -%}
              <div class="mega-menu__column">
                <a href="{{ link.url }}" class="mega-menu__heading link focus-inset">
                  {{ link.title }}
                </a>
                {%- if link.links != blank -%}
                  <ul class="mega-menu__list">
                    {%- for childlink in link.links -%}
                      <li>
                        <a href="{{ childlink.url }}" class="mega-menu__link link focus-inset">
                          {{ childlink.title }}
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              </div>
            {%- endfor -%}
          </div>
        </div>
      </details>
    </div>
  {%- endif -%}
  
  <style>
    .mega-menu-wrapper {
      position: relative;
    }
  
    .mega-menu {
      position: static;
    }
  
    .mega-menu__content {
      background-color: {{ block.settings.background_color }};
      border-radius: {{ block.settings.border_radius }}px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      left: 0;
      overflow-y: auto;
      padding: 2rem;
      position: absolute;
      right: 0;
      top: 100%;
      z-index: 1;
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      margin-right: calc(-50vw + 50%);
    }
  
    .mega-menu__grid {
      display: grid;
      gap: 2rem;
      grid-template-columns: repeat({{ block.settings.columns }}, 1fr);
      max-width: var(--page-width);
      margin: 0 auto;
      padding: 0 1.5rem;
    }
  
    .mega-menu__column {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
  
    .mega-menu__heading {
      color: {{ block.settings.heading_color }};
      font-size: {{ block.settings.heading_size }}px;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
  
    .mega-menu__list { 
      list-style: none;
      margin: 0;
      padding: 0;
    }
  
    .mega-menu__link {
      color: {{ block.settings.link_color }};
      display: block;
      font-size: {{ block.settings.link_size }}px;
      padding: 0.5rem 0;
      text-decoration: none;
      transition: color 0.2s ease;
    }
  
    .mega-menu__link:hover {
      color: {{ block.settings.link_hover_color }};
    }
  
    @media screen and (max-width: 989px) {
      .mega-menu__content {
        display: none;
      }
    }
  </style> 
 